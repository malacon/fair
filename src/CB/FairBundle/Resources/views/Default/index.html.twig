{% extends 'FairBundle::layout.html.twig' %}

{% block content -%}

    {% if is_granted('ROLE_ADMIN') %}
        <div class="well">
            <p class="lead">The following links will allow you to see (and edit, be careful!) the parts of the fair.</p>
        </div>
    {% else %}

        <div class="content-item">
            <div class="content-title">Baked Goods</div>
            <div class="help" data-toggle="popover" data-placement="left" data-content="" title="" data-original-title="Baked Goods Help">Help</div>
            <div class="bakedItems">
                <p><strong>I agree to bring the following:</strong><br>
                {% for bakedItem in bakedItems %}
                    {#
                        IF baking this item: have color be success, words say baking
                        IF baking another item, have color be inverse, disable, words say nothing
                        IF item is not available, have color be inverse, disable, words say Unavailable
                        ELSE color success, words say nothing
                    #}
                    <a data-baked-id="{{ bakedItem.id }}"
                       class="btn {% if not bakedItem.isItemAvailable() and not app.user.isBakingItem(bakedItem) -%}
                                        disabled
                                        {%- endif %} {% if app.user.isBakingItem(bakedItem) -%}
                                        btn-warning
                                        {%- elseif bakedItem.isItemAvailable() -%}
                                        btn-success
                                    {%- endif -%}"
                       href="{{ path('baked_bring', {'id': bakedItem.id}) }}.json">
                        {%- if app.user.isBakingItem(bakedItem) -%}
                            You are baking: <span>{{ bakedItem }}</span>
                        {%- elseif not bakedItem.isItemAvailable() -%}
                            <span>{{ bakedItem }}</span> is Unavailable
                        {%- else -%}
                            <span>{{ bakedItem }}</span>
                        {%- endif -%}
                    </a>
                {% endfor %}
                </p>
            </div>
        </div>
        <div class="content-item">
            <div class="content-title">Craft/Auction Items</div>
            <div class="help" data-toggle="popover" data-placement="left" data-content="" title="" data-original-title="Craft/Auction Help">Help</div>
                <a class="btn btn-success auction-add" href="{{ path('auction_add', {'type': 'craft'}) }}.json">Add $25 craft item</a> <a class="btn btn-success auction-add" href="{{ path('auction_add', {'type': 'auction'}) }}.json">Add $100 auction item</a><br>
                <p></p><strong>I agree to bring the following:</strong><br>
                <div class="auctionItems">
                    {% for saleItem in app.user.saleItems %}
                        <div class="auctionItem alert" data-auction-id="{{ saleItem.id }}">{{ saleItem }}<a class="close" href="{{ path('auction_remove', {'id': saleItem.id}) }}">&times;</a></div>
                    {% endfor %}
                </div>
                </p>
        </div>
        <div class="content-item" id="booths">
            <div class="content-title">Booths</div>
            <div class="help" data-toggle="popover" data-placement="left" data-content="" title="" data-original-title="Booth Help">Help</div>
            {{ include(
            'FairBundle:Default:boothList.html.twig',
            { 'booths': booths }
            ) }}
        </div>
        {{ include(
        'FairBundle:Default:userStatus.html.twig'
        ) }}
    {% endif %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/fair/js/register/register.js') }}"></script>
{% endblock %}
